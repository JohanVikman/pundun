{require_otp_vsn, "^(1[8-9]|[2-9]\d)"}.


{erl_opts, [debug_info,
	    {i, "./include"}
	   ]}.
{eunit_opts, [verbose]}.

{deps, [
	{sync, ".*", {git, "https://github.com/rustyio/sync.git"}},
	{scramerl, ".*", {git, "https://github.com/pundunlabs/scramerl.git",{branch, "master"}}},
	{erl_leveldb, ".*", {git, "https://github.com/pundunlabs/erl_leveldb.git",{branch, "master"}}},
	{enterdb, ".*", {git, "https://github.com/pundunlabs/enterdb.git",{branch, "master"}}},
	{gb_conf, ".*", {git, "https://github.com/pundunlabs/gb_conf.git",{branch, "master"}}},
	{gb_log, ".*", {git, "https://github.com/pundunlabs/gb_log.git",{branch, "master"}}},
	{gb_hash, ".*", {git, "https://github.com/pundunlabs/gb_hash.git",{branch, "master"}}},
	{gb_dyno, ".*", {git, "https://github.com/pundunlabs/gb_dyno.git",{branch, "master"}}},
	{gb_cli, ".*", {git, "https://github.com/pundunlabs/gb_cli.git",{branch, "master"}}},
	{eper, ".*", {git, "https://github.com/massemanet/eper.git", {branch, "master"}}}
    ]}.

{pre_hooks, [
    {erlc_compile, "config/hooks/pre_erlc_compile.sh"},
    {release, "config/hooks/pre_release.sh"}
    ]
}.

{post_hooks, [
    {release, "config/hooks/post_release.sh"}
    ]
}.

{ct_log_dir, "test/logs"}.
{ct_use_short_names, true}.

{relx,
    [
	{default_release, pundun, "0.1.1"},

	{release, {pundun, "0.1.1"},
         [kernel,
	  stdlib,
	  sasl,
	  {mnesia, load},
	  {sync, load},
	  {mochiweb, load},
	  {scramerl, load},
	  yamerl,
	  gb_conf,
	  gb_log,
	  gb_hash,
	  {erl_leveldb, load},
	  {eper, load},
	  enterdb,
	  gb_dyno,
	  {gb_cli, load},
	  pundun]},

        {dev_mode, true},
        {include_erts, false},

        {extended_start_script, true},

	{vm_args, "config/vm.args"},
	{sys_config, "config/sys.config"},

	{overlay, [
           {mkdir,  "log/sasl"},
	   {mkdir,  "slib/leveldb"},
	   {mkdir,  "data/db"},
	   {mkdir,  "etc"},
	   {copy,   "config/slib", "slib/leveldb"}
          ]}
	]}.

{profiles, [
    {prod, [
        {erl_opts, [no_debug_info]},
        {relx, [{dev_mode, false}]}
    ]},
    {target, [
        {erl_opts, [no_debug_info]},
        {relx, [{dev_mode, false}, {include_erts, true}]}
    ]},
    {native, [
        {erl_opts, [{native, o3}]}
    ]},
    {test, [
        {deps, []},
        {erl_opts, [debug_info]}
    ]}
]}.
